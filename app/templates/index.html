<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="robots" content="noindex, nofollow">
    <meta name="googlebot" content="noindex, nofollow">
    <meta name="slurp" content="noindex, nofollow">
    <!-- Anti-scraping tag -->
    <meta name="description" content="Vesta is a personalized cycle prediction tool that uses your menstrual data to predict your next cycle start date. It is a highly probable estimate based on your personalized model." />
    <meta name="generator" content=" " />
    <meta name="HandheldFriendly" content="false" />
    <meta name="rating" content="adult" />
    <meta http-equiv="X-Frame-Options" content="DENY" />
    <title>Vesta | Your personalized cycle prediction tool</title>
    <style>
      :root {
        --ink: #1b1630;
        --muted: #6b6585;
        --purple-900: #2b1c4d;
        --purple-700: #4c2a86;
        --purple-500: #7a4bd4;
        --blue-500: #4aa3df;
        --blue-300: #8fd0ff;
        --card: rgba(255, 255, 255, 0.78);
        --stroke: rgba(64, 54, 120, 0.14);
        --shadow: 0 18px 50px rgba(42, 28, 77, 0.18);
      }

      * { box-sizing: border-box; }
      body {
        margin: 0;
        font-family: "Segoe UI", "Inter", "Helvetica Neue", Arial, sans-serif;
        color: var(--ink);
        background: radial-gradient(circle at 15% 20%, #f4efff 0%, #eef5ff 35%, #f7f0ff 100%);
        min-height: 100vh;
      }

      .page {
        max-width: 1200px;
        margin: 0 auto;
        padding: 32px 28px 48px;
      }

      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 28px;
      }

      .title {
        font-size: 28px;
        font-weight: 700;
        color: var(--purple-900);
        letter-spacing: 0.2px;
      }

      .subtitle {
        font-size: 14px;
        color: var(--muted);
        margin-top: 6px;
      }

      .layout {
        display: grid;
        grid-template-columns: minmax(240px, 1fr) minmax(360px, 1.2fr) minmax(260px, 1fr);
        gap: 24px;
        align-items: start;
      }

      .panel {
        background: var(--card);
        border: 1px solid var(--stroke);
        border-radius: 18px;
        padding: 20px 18px;
        box-shadow: var(--shadow);
        backdrop-filter: blur(8px);
      }

      .panel h3 {
        margin: 0 0 12px;
        font-size: 16px;
        color: var(--purple-700);
      }

      .muted {
        color: var(--muted);
        font-size: 13px;
      }

      .prediction {
        background: linear-gradient(135deg, rgba(122, 75, 212, 0.18), rgba(74, 163, 223, 0.2));
        border-radius: 22px;
        padding: 26px 24px;
        border: 1px solid rgba(122, 75, 212, 0.25);
        box-shadow: 0 20px 60px rgba(76, 42, 134, 0.2);
      }

      .prediction h2 {
        margin: 0 0 14px;
        font-size: 20px;
        color: var(--purple-900);
      }

      .prediction .date {
        font-size: 32px;
        font-weight: 700;
        color: var(--purple-700);
        margin: 6px 0 12px;
      }

      .pill {
        display: inline-block;
        padding: 6px 12px;
        border-radius: 999px;
        background: rgba(76, 42, 134, 0.12);
        color: var(--purple-700);
        font-size: 12px;
        letter-spacing: 0.2px;
      }

      .range {
        margin-top: 10px;
        font-size: 14px;
        color: var(--ink);
      }

      .error {
        color: #7c1d6f;
        background: rgba(188, 83, 174, 0.12);
        border: 1px solid rgba(188, 83, 174, 0.25);
        padding: 10px 12px;
        border-radius: 12px;
        margin-top: 12px;
        font-size: 13px;
      }

      form {
        display: grid;
        gap: 14px;
      }

      label {
        font-weight: 600;
        color: var(--purple-700);
        font-size: 13px;
      }

      input[type="date"] {
        width: 100%;
        padding: 10px 12px;
        border-radius: 12px;
        border: 1px solid rgba(76, 42, 134, 0.2);
        background: rgba(255, 255, 255, 0.9);
        color: var(--ink);
      }

      button {
        border: none;
        padding: 11px 14px;
        border-radius: 12px;
        background: linear-gradient(135deg, var(--purple-500), var(--blue-500));
        color: white;
        font-weight: 600;
        cursor: pointer;
        box-shadow: 0 12px 24px rgba(76, 42, 134, 0.25);
      }

      button:hover {
        filter: brightness(1.05);
      }

      table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
      }

      th, td {
        text-align: left;
        padding: 8px 4px;
        border-bottom: 1px solid rgba(76, 42, 134, 0.12);
      }

      th {
        color: var(--purple-700);
        font-weight: 600;
        font-size: 12px;
        text-transform: uppercase;
        letter-spacing: 0.6px;
      }

      @media (max-width: 1024px) {
        .layout {
          grid-template-columns: 1fr;
        }
        .prediction {
          order: -3;
        }

        #add-cycle {
          order: -2;
        }

        #latest-cycles {
          order: -1;
        }
      }

      .divider {
        border: none;
        border-top: 1px solid rgba(76, 42, 134, 0.12);
        margin: 12px 0;
      }

      .insights {
        display: flex;
        flex-direction: column;
        gap: 14px;
        margin-top: 14px;
      }

      .insight-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 10px 12px;
        background: rgba(122, 75, 212, 0.06);
        border-radius: 10px;
        border: 1px solid rgba(122, 75, 212, 0.12);
      }

      .insight-label {
        font-size: 13px;
        color: var(--muted);
        font-weight: 500;
      }

      .insight-value {
        font-size: 13px;
        color: var(--purple-700);
        font-weight: 600;
        max-width: 160px;
        text-align: right;
        line-height: 1.3;
      }
    </style>
  </head>
  <body>
    <div class="page">
      <header>
        <div>
          <div class="title">Vesta</div>
          <div class="subtitle">Your personalized cycle prediction</div>
        </div>
        <span class="pill">{{ total_cycles }} cycles saved</span>
      </header>

      <main class="layout">
        <section class="panel" id="latest-cycles">
          <h3>Your cycle insights</h3>
          <p class="muted">Based on your last 12 cycles.</p>
          
          {% if stats %}
            <div class="insights">
              <div class="insight-item">
                <span class="insight-label">Your typical cycle</span>
                <span class="insight-value">{{ stats.typical_cycle }}</span>
              </div>
              <div class="insight-item">
                <span class="insight-label">Your typical period</span>
                <span class="insight-value">{{ stats.typical_period }}</span>
              </div>
              <div class="insight-item">
                <span class="insight-label">Cycle pattern</span>
                <span class="insight-value">{{ stats.consistency }}</span>
              </div>
              <div class="insight-item">
                <span class="insight-label">Trend</span>
                <span class="insight-value">{{ stats.trend }}</span>
              </div>
            </div>
            <hr class="divider" />
          {% endif %}
          
          <h3 style="margin-top: 16px; font-size: 14px;">Last 12 cycles</h3>
          <table>
            <thead>
              <tr>
                <th>Cycle Start</th>
                <th>Period End</th>
              </tr>
            </thead>
            <tbody>
              {% for cycle in cycles %}
                <tr>
                  <td>{{ cycle.start_date }}</td>
                  <td>{{ cycle.end_date }}</td>
                </tr>
              {% else %}
                <tr>
                  <td colspan="2" class="muted">No cycles saved yet.</td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </section>

        <section class="prediction">
          <h2>Next cycle start date</h2>
          {% if prediction %}
            <div class="date">{{ prediction.predicted_next_start_date }}</div>
            <div class="muted">
              This prediction is a highly probable estimate based on your personalized model.
            </div>
            <hr class="divider" />
            <div class="range">
              Probable start range: {{ prediction.date_range_lower }} to {{ prediction.date_range_upper }}
            </div>
            <div class="range">
              Cycle length: {{ prediction.predicted_cycle_length }} days
            </div>
          {% endif %}

          {% if error %}
            <div class="error">{{ error }}</div>
          {% endif %}
        </section>

        <section class="panel" id="add-cycle">
          <h3>Add a new cycle</h3>
          <p class="muted">Enter your latest period start and end dates.</p>
          <form method="post">
            <div>
              <label for="start_date">Period start date</label>
              <input id="start_date" name="start_date" type="date" required />
            </div>
            <div>
              <label for="end_date">Period end date</label>
              <input id="end_date" name="end_date" type="date" required />
            </div>
            <button type="submit">Save and predict</button>
          </form>
        </section>
      </main>
    </div>
  </body>
</html>
